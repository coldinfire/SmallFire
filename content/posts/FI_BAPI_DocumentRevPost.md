---
title: " BAPI:BAPI_ACC_DOCUMENT_REV_POST 反冲会计凭证 "
date: 2019-12-04
draft: false
author: Small Fire
isCJKLanguage: true
categories: 
  - business

tags: 
  - BAPI
  - FICO

---

反冲会计凭证：可以冲销自开发程序生成的凭证，必须传入交易码参数。

### 使用实例

```ABAP
DATA: L_BKPF TYPE TABLE OF bkpf WITH HEADER LINE.
DATA: REVERSAL TYPE BAPIACREV.
SELECT SINGLE * FROM BKPF INTO L_BKPF
 WHERE BUKRS = P_BUKRS
   AND BELNR = P_BELNR
   AND GJAHR = P_GJAHR.
REVERSAL-OBJ_TYPE = L_BKPF-AWTYP.
CONCATENATE IW_-BELNR IW_-BUKRS IW_-GJAHR INTO REVERSAL-OBJ_KEY_R.
REVERSAL-OBJ_KEY = REVERSAL-OBJ_KEY_R.
REVERSAL-OBJ_KEY = '$'.
CALL FUNCTION 'OWN_LOGICAL_SYSTEM_GET'
  IMPORTING
    OWN_LOGICAL_SYSTEM = REVERSAL-OBJ_SYS
  EXCEPTIONS
    OWN_LOGICAL_SYSTEM_NOT_DEFINED = 1
    OTHERS = 2.
REVERSAL-REASON_REV = '01'.  "原因"
REVERSAL-PSTNG_DATE = SY-DATUM.
CLEAR: RETURN.
CALL FUNCTION 'BAPI_ACC_DOCUMENT_REV_POST'
  EXPORTING
    REVERSAL       = REVERSAL
    BUS_ACT        = 'RFBU'
  IMPORTING
    OBJ_TYPE       = OBJTYPE
    OBJ_KEY        = OBJKEY
    OBJ_SYS        = OBJSYS
  TABLES
    RETURN         = RETURN.
```

