---
title: "JavaScript基础"
date: 2017-09-21
draft: false
author: Small Fire
isCJKLanguage: true
categories: 
  - 前端

tags: 
  - JS

---

JavaScript ( ECMAScript )是一个脚本语言。它是一个轻量级，但功能强大的编程语言。

### 浏览器组成

#### 渲染引擎

用来解析 HTML 与 CSS，俗称内核。

#### JS 引擎

JS 解释器，用来读取网页中的 JavaScript 代码，对齐处理后运行。

浏览器本身不会执行 JS 代码，而是通过内置的 JS 解释器来执行 JS 代码。JS 引擎执行代码时，逐行解释每一句源码，然后由计算机去执行，所以 JavaScript 语言归为脚本语言，会逐行解释执行。

### JavaScript 书写规范

1. 文件编码统一为 **utf-8**, 书写过程过，每行代码结束必须有分号；
2. JavaScript 严格区分大小写，书写时请注意
3. 库引入：原则上仅引入 jQuery 库，若需引入第三方库，须与团队其他人员讨论决定；
4. 变量命名：驼峰式命名。要求变量集中声明，避免全局变量

   - 原生 JavaScript 变量要求是纯英文字母，首字母须小写，如 iJavaScript;

   - jQuery 变量要求首字符为’_’, 其他与原生 JavaScript 规则相同，如: _iJaveScript;
5. 类命名：首字母大写，驼峰式命名。如 IJaveScript;
6. 函数命名：首字母小写驼峰式命名。如 iJaveScript ();
7. 命名语义化，尽可能利用英文单词或其缩写；
8. 尽量避免使用存在兼容性及消耗资源的方法或属性，比如 eval () & innerText;
9. 后期优化中，JavaScript 非注释类中文字符须转换成 unicode 编码使用，以避免编码错误时乱码显示；
11. 注重与 html 分离，减小 reflow, 注重浏览器性能。

### JavaScript 脚本执行顺序

第一步定义： 分为变量定义和函数定义

第二步执行： 先从上往下定义完所有的内容后，会从上往下执行；除了变量和函数定义外的其他内容都会执行；如：赋值、函数调用

第三步查找：能在栈里面找到的，就不去堆里面找，因为栈空间小，就近原则会在栈里面开辟，就能找到堆里面的地址

### JavaScript显示数据

JavaScript 可以通过不同的方式来输出数据：

- 使用 **alert()** 弹出警告框
- 使用 **console.log()** 写入到浏览器的控制台
- 使用 **prompt()**  弹出可输入的对话框
- 使用 **document.write()** 方法将内容输出到到 HTML 文档页面中
  - 绝对不要在文档 (DOM) 加载完成之后使用 document.write()，这会覆盖该文档
- 使用 **.innerHTML** 写入到 HTML 元素

### 数据类型和变量

#### 数据类型

| Type       | Desc                                                         |
| :--------- | :----------------------------------------------------------- |
| number     | 数字，不区分整数和浮点数；`NaN`(Not a Number)；`Infinity`(∞) |
| string     | 字符串是以单引号`'`或双引号`"`括起来的任意文本               |
| boolean    | 一个布尔值只有`true`、`false`两种值                          |
| null       | null 表示一个"空"的值，它和0以及空字符串`''`不同，0是一个数值，`''`表示长度为0的字符串 |
| undefine   | 未定义，如果一个变量没有初始化值，则默认复制为 undefine      |
| object     | 对象，JavaScript的对象是一组由键-值对组成的无序集合；`对象变量.属性名` 获取对象属性 |
| 逻辑运算符 | 与运算:`&&`；或运算:`||`；非运算:`!`                         |
| 比较运算符 | `==`比较，会自动转换数据类型再比较；`===`比较，不会自动转换数据类型，如果数据类型不一致返回false，再比较 |
| strict模式 | 在strict模式下运行的JavaScript代码，强制通过var申明变量，未使用`var`申明变量就使用的，将导致运行错误。启用strict模式的方法是在JavaScript代码的第一行写上：`'use strict'` |

#### 变量

变量名是大小写英文、数字、`$`和`_`的组合，且不能用数字开头；使用等号`=`对变量进行赋值；变量只能用`var`申明一次。

`var age = 10;`

- var 是一个关键字，用来声明变量。使用该关键字声明变量后，计算机会自动为变量分配内存空间
- age 自定义的变量名，通过该变量名来访问该内存中分配的空间
- 变量值是保存到变量空间里面的值

#### 数据类型转换

检测变量数据类型：`console.log(typeof var_value)`

| typeof    | Desc                      | typeof  | Desc                           |
| --------- | ------------------------- | ------- | ------------------------------ |
| number    | 如果变量是Number类型的    | boolean | 如果变量是Boolean类型的        |
| string    | 如果变量是String类型的    | object  | 如果变量是引用类型或null类型的 |
| undefined | 如果变量是undefined类型的 |         |                                |

数据类型间的转换方法：

| Method            | Desc                         | Method             | Desc                     |
| ----------------- | ---------------------------- | ------------------ | ------------------------ |
| number.toString() | 转成字符串                   | parseInt(string)   | 将string类型转换成整数   |
| String(number)    | 强制转换，转成字符串         | parseFloat(string) | 将string类型转换成浮点数 |
| 加号拼接字符串    | 和字符串拼接的结果都是字符串 | Number(string)     | 将string类型转换为数值型 |

#### 运算符

| Type       | List                   | Desc                                                         |
| ---------- | ---------------------- | ------------------------------------------------------------ |
| 一元运算符 | ++，- -，+(正号)       | ++(- -)在前，先自增(减)，再运算；++(- -)在后，先运算，再自增(减) |
| 算术运算符 | +，-，*，/，%          | %，求模运算                                                  |
| 赋值运算符 | =，+=，-=              | 和数学运算符逻辑相同                                         |
| 比较运算符 | >,<,>=,<=,==,===(全等) | 类型相同,直接比较；不同，先进行类型转换,然后比较；           |
|            | === 全等于             | 比较前先校验类型，类型不一样，直接返回 false                 |
| 逻辑运算符 | &&，\|\|，!            | && / \|\| 短路；number : 0或NaN为假；string : 空字符串" "为假； |
|            |                        | null & undefine : 都是 false；对象 : 所有对象都为 true       |
| 三元运算符 | 表达式 ? true : false  | var c = a > b ? 1 : 0;                                       |

#### 流程控制语句

| Type            | Detail                                        | Desc                                   |
| --------------- | --------------------------------------------- | -------------------------------------- |
| if ... else ... | if () { ... } else if () { ... } else { ... } |                                        |
| switch          | switch (){ case x1: ... case x2: ... }        | 可以接受任意的原始数据类型             |
| while           | while () { ... }                              | 只有一个判断条件，条件满足，就不断循环 |
| do ... while    | do { ... } while ();                          | 在每次循环完成的时候判断条件           |
| for             | for(var i=1; i<=100; i++){ ... }              | 已知循环的初始和结束条件时非常有用     |

### 字符串操作

JavaScript 为字符串提供了一些常用方法。注意：调用这些方法本身不会改变原有字符串的内容，而是返回一个新字符串。

**字符串是不可变的** ，如果对字符串的某个索引赋值，不会有任何错误，但是，也没有任何效果。

`var s = 'Hello world';`

| Method                     | Desc                                               | Method              | Desc                                              |
| -------------------------- | -------------------------------------------------- | ------------------- | ------------------------------------------------- |
| s.length;                  | 获取字符串的长度                                   | s.substring(0,5);   | 截取指定索引区间的字串                            |
| s.toUpperCase();           | 将字符串转为大写                                   | s.toLowerCase();    | 将字符串转为小写                                  |
| s[n];                      | n是索引号，获取字符串指定位置字符，索引号从 0 开始 | s.indexOf('world'); | 搜索指定字符出现的首字母位置，如果没有找到返回 -1 |
| s.split(separator, limit); | 将一个字符串分成子串并将它们作为数组返回           |                     |                                                   |

### 数组操作

数组是一个用于存储不同数据类型的变量。它将不同的元素存储在一个盒子中，供以后使用。JavaScript 的数组可以包括任意数据类型；数组的元素可以通过索引来访问。

`var arr = ['AAA',2,null,true];`

| Method                | Desc                                         | Method                 | Desc                                                         |
| --------------------- | -------------------------------------------- | ---------------------- | ------------------------------------------------------------ |
| arr.length;           | 获取数组长度                                 | arr.sort();            | 对数组进行排序，默认顺序                                     |
| arr.indexOf(2);       | 搜索指定元素的索引位置                       | arr.reverse();         | 将数组内容进行反转                                           |
| arr.slice(0,3);       | 截取数组的部分元素，返回新的数组；左闭右开； | arr.splice(n,m,p1,p2); | 从指定的索引开始删除若干元素，然后再从该位置添加若干元素     |
| arr.push('A','B');    | 向数组末尾添加元素，返回新的数组长度         | arr.concat(arrOther);  | 把当前的数组和另一个数组连接起来，生产并返回一个新的数组     |
| arr.pop();            | 删除数组最后一个元素并返回元素值             | arr.join();            | 把当前数组的每个元素都用指定的字符串连接起来，然后返回连接后的字符串 |
| arr.unshift('A','B'); | 在数组头部添加若干元素，返回新的数组长度     | arr.toString();        | 将数组转为字符串，以逗号分隔                                 |
| arr.shift();          | 删除数组第一个元素并返回元素值               |                        |                                                              |

### 对象操作

JavaScript的对象是一种无序的集合数据类型，它由若干键值对组成。

```javascript
var peoper = {
    name: '',
    age: 23,
    height:170,
    weight:70
};
```

- 用一个大括号内容表示一个对象，键值对以`xxx: xxx`形式申明，用逗号隔开。

- 访问属性是通过`.`操作符完成的，要求属性名必须是一个有效的变量名。

#### Map & Set

`Map`是一组键值对的结构，具有极快的查找速度。

`Set`和`Map`类似，也是一组key的集合，但不存储value。由于key不能重复，所以，在`Set`中，没有重复的key。

#### 迭代：Iterable

ES6标准引入了新的`iterable`类型，Array、Map 和 Set都属于 iterable类型。

具有iterable类型的集合可以使用 iterable 内置的`forEach`方法，它接收一个函数，每次迭代就自动回调该函数。循环来遍历。

```javascript
'use strict';
var a = ['ele1', 'ele2', 'ele3'];
// element: 指向当前元素的值
// index: 指向当前索引
// array: 指向Array对象本身
a.forEach(function (element, index, array) {
    console.log(element + ', index = ' + index);
});
```

### 函数

#### 创建

Method 1: `function method_name(形式参数列表){ 方法体 }`

Method 2: `var method_name = function(形式参数列表){ 方法体 }`

#### 方法



#### 属性

`arguments.length` : 代表形参的个数

#### 特点

- 方法定义时，形参的类型不用写。

- 方法是一个对象，如果定义名称相同的方法，会覆盖。
- 方法的调用只与方法的名称有关，和参数列表无关。
- 在方法声明中有一个隐藏的内置对象(数组) `arguments`，封装所有的实际参数

#### 调用

方法名称(实际参数列表);

#### Demo

```javascript
var fun1 = function(a,b){
	alert(a + b);
    alert(arguments[0] * arguments[1]);
};
fun1(3,4);
```

